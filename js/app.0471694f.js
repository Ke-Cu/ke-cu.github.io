(function(t){function e(e){for(var r,o,i=e[0],l=e[1],c=e[2],d=0,p=[];d<i.length;d++)o=i[d],Object.prototype.hasOwnProperty.call(n,o)&&n[o]&&p.push(n[o][0]),n[o]=0;for(r in l)Object.prototype.hasOwnProperty.call(l,r)&&(t[r]=l[r]);u&&u(e);while(p.length)p.shift()();return s.push.apply(s,c||[]),a()}function a(){for(var t,e=0;e<s.length;e++){for(var a=s[e],r=!0,i=1;i<a.length;i++){var l=a[i];0!==n[l]&&(r=!1)}r&&(s.splice(e--,1),t=o(o.s=a[0]))}return t}var r={},n={app:0},s=[];function o(e){if(r[e])return r[e].exports;var a=r[e]={i:e,l:!1,exports:{}};return t[e].call(a.exports,a,a.exports,o),a.l=!0,a.exports}o.m=t,o.c=r,o.d=function(t,e,a){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},o.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(o.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)o.d(a,r,function(e){return t[e]}.bind(null,r));return a},o.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="/";var i=window["webpackJsonp"]=window["webpackJsonp"]||[],l=i.push.bind(i);i.push=e,i=i.slice();for(var c=0;c<i.length;c++)e(i[c]);var u=l;s.push([0,"chunk-vendors"]),a()})({0:function(t,e,a){t.exports=a("56d7")},"0711":function(t,e,a){},"0f2b":function(t,e,a){"use strict";a("b352")},"4fd1":function(t,e,a){"use strict";a("bb62")},"56d7":function(t,e,a){"use strict";a.r(e);var r=a("2b0e"),n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"app"}},[a("home")],1)},s=[],o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"home"},[a("v-app",{class:t.dark?"bg-dark":"bg-light"},[a("app-bar",{on:{dark:t.toggleTheme,navItem:t.getNavItem}}),a("v-main",[a("list",{directives:[{name:"show",rawName:"v-show",value:"recent"===t.currentTab,expression:"currentTab === 'recent'"}],attrs:{dark:t.dark}}),a("month-bill",{directives:[{name:"show",rawName:"v-show",value:"month"===t.currentTab,expression:"currentTab === 'month'"}],attrs:{dark:t.dark}})],1),a("v-footer",{class:t.dark?"bg-dark":"bg-light",attrs:{app:""}},[a("Bottom",{attrs:{dark:t.dark},on:{currentTab:t.getCurrentTab}})],1)],1)],1)},i=[],l=a("bc3a"),c=a.n(l);const u={baseURL:"http://106.55.179.247:5000/accounting/",timeout:2e4,headers:{"X-Requested-With":"XMLHttpRequest","Content-Type":"application/json; charset=UTF-8"}},d=(t,e=!0)=>{let a=c.a.create({...u,...t});return a.interceptors.response.use(t=>t.data,async t=>(console.error(t.message),Promise.reject(t))),a};var p=d;const h=p({}),{get:m}=h,v={getToday:async()=>m("today"),getScopeAmount:async t=>m("recentdays",{params:t}),getMonthBill:async t=>m("monthlystatistics",{params:t})};var f=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"app-bar"},[a("v-app-bar",{attrs:{color:"#ffffff",dense:"",fixed:""}},[a("v-app-bar-nav-icon",{on:{click:function(e){t.drawer=!0}}}),a("v-toolbar-title",[t._v(t._s(t.title))]),a("v-spacer"),a("v-btn",{attrs:{icon:""},on:{click:t.toggleTheme}},[a("v-icon",{class:t.dark?"dark":"light"},[t._v("mdi-brightness-2")])],1)],1),a("v-navigation-drawer",{attrs:{absolute:"",temporary:"",dark:t.dark},model:{value:t.drawer,callback:function(e){t.drawer=e},expression:"drawer"}},[a("v-list",{attrs:{nav:"",dense:""}},[a("v-list-item-group",{model:{value:t.group,callback:function(e){t.group=e},expression:"group"}},t._l(t.listItems,(function(e,r){return a("v-list-item",{key:r,on:{click:function(e){return t.clickItem(r)}}},[a("v-list-item-icon",[a("v-icon",[t._v(t._s(e.icon))])],1),a("v-list-item-title",[t._v(" "+t._s(e.text)+" ")])],1)})),1)],1)],1)],1)},b=[],g={name:"AppBar",data(){return{title:"可家账单",dark:!1,drawer:!1,group:0,listItems:[{icon:"mdi-calendar-today",text:"今日明细"},{icon:"mdi-calendar-week",text:"最近一周"},{icon:"mdi-calendar-month",text:"最近一月"},{icon:"mdi-calendar-blank",text:"自定义日期"},{icon:"mdi-cog",text:"设置"}]}},methods:{toggleTheme(){this.dark=!this.dark,this.$emit("dark",this.dark)},clickItem(t){this.title=this.listItems[t].text,this.drawer=!1}}},y=g,k=(a("b6ea"),a("2877")),_=Object(k["a"])(y,f,b,!1,null,null,null),x=_.exports,w=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"list"},[a("v-card",{staticClass:"mx-auto",attrs:{"max-width":"500"}},[a("v-list",{attrs:{dark:t.dark}},[a("v-subheader",[t._v("最近30天")]),a("v-divider"),t._l(t.billData,(function(e,r){return a("v-list-group",{key:r,attrs:{"prepend-icon":"mdi-calendar-week","no-action":"",color:"blue-grey lighten-2 "},scopedSlots:t._u([{key:"activator",fn:function(){return[a("v-list-item-content",[a("v-list-item-title",{domProps:{textContent:t._s(e.month+"月"+e.day+"日")}})],1),t._v(" ￥"+t._s(e.dayTotal)+" ")]},proxy:!0}],null,!0),model:{value:e.active,callback:function(a){t.$set(e,"active",a)},expression:"item.active"}},t._l(e.records,(function(e){return a("v-list-item",{key:e.msgId},[a("v-list-item-content",[a("v-list-item-title",{domProps:{textContent:t._s(e.item)}}),a("v-list-item-subtitle",[t._v(" "+t._s(e.typeName))])],1),t._v(" "+t._s(e.amount)+" ")],1)})),1)}))],2)],1)],1)},C=[],O={name:"List",props:{dark:{type:Boolean}},data(){return{billData:[]}},mounted(){this.getData()},methods:{async getData(){const t=await v.getScopeAmount({days:30});this.billData=t.data.reverse(),this.billData[0].active=!0}}},D=O,j=(a("0f2b"),Object(k["a"])(D,w,C,!1,null,"c2e5e41c",null)),T=j.exports,S=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"month-bill"},[a("date-picker",{attrs:{dark:t.dark},on:{currentDate:t.getCurrentDate}}),a("v-card",{staticClass:"mt-4 pa-6 mx-auto",attrs:{"max-width":"400",dark:t.dark}},[t._v(" 本月总消费： ￥"),a("span",[t._v(t._s(t.monthTotal))])]),a("v-card",{staticClass:"mt-4 pa-3 mx-auto",attrs:{"max-width":"400",dark:t.dark}},[a("v-card-subtitle",[t._v("类别明细")]),a("v-simple-table",{scopedSlots:t._u([{key:"default",fn:function(){return[a("thead",[a("tr",[a("th",{staticClass:"text-left"},[t._v("类别")]),a("th",{staticClass:"text-left"},[t._v("消费额")])])]),a("tbody",t._l(t.monthDatasets,(function(e){return a("tr",{key:e.name},[a("td",[t._v(t._s(e.type))]),a("td",[t._v(t._s(e.amount))])])})),0)]},proxy:!0}])})],1),a("v-card",{staticClass:"mt-4 pa-3 mx-auto",attrs:{"max-width":"400",dark:t.dark}},[a("v-card-subtitle",[t._v("类别图表")]),a("doughnut-chart",{attrs:{dark:t.dark,chartData:t.chartData}})],1)],1)},B=[],I=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("Bar",{attrs:{"chart-options":t.chartOptions,"chart-data":t.chartData,"chart-id":t.chartId,"dataset-id-key":t.datasetIdKey,plugins:t.plugins,"css-classes":t.cssClasses,styles:t.styles,width:t.width,height:t.height}})},A=[],$=a("7b97"),M=a("9b4a");M["f"].register(M["o"],M["p"],M["h"],M["c"],M["e"],M["j"]);var N={name:"BarChart",components:{Bar:$["a"]},props:{chartData:{type:Object,default:()=>({labels:["January","February","March"],datasets:[{data:[40,20,12]}]})},chartId:{type:String,default:"bar-chart"},datasetIdKey:{type:String,default:"label"},width:{type:Number,default:400},height:{type:Number,default:400},cssClasses:{default:"",type:String},styles:{type:Object,default:()=>{}},plugins:{type:Array,default:()=>[]}},data(){return{chartOptions:{responsive:!0}}}},P=N,E=Object(k["a"])(P,I,A,!1,null,null,null),J=E.exports,K=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"date-picker"},[a("v-dialog",{ref:"dialog",attrs:{"return-value":t.date,persistent:"",width:"290px",dark:t.dark},on:{"update:returnValue":function(e){t.date=e},"update:return-value":function(e){t.date=e}},scopedSlots:t._u([{key:"activator",fn:function(e){var r=e.on,n=e.attrs;return[a("div",t._g(t._b({class:["title",t.dark?"dark":" "]},"div",n,!1),r),[a("span",[a("span",{staticClass:"month"},[t._v(t._s(t.month)+"月")]),t._v(" 消费汇总 "),a("span",{staticClass:"year"},[t._v("("+t._s(t.date)+")")])]),a("v-icon",{attrs:{dark:t.dark}},[t._v("mdi-calendar-month-outline")])],1)]}}]),model:{value:t.modal,callback:function(e){t.modal=e},expression:"modal"}},[a("v-date-picker",{attrs:{type:"month",scrollable:"",color:"cyan"},model:{value:t.date,callback:function(e){t.date=e},expression:"date"}},[a("v-spacer"),a("v-btn",{attrs:{text:"",color:"primary"},on:{click:function(e){t.modal=!1}}},[t._v(" Cancel ")]),a("v-btn",{attrs:{text:"",color:"primary"},on:{click:t.handleClickOK}},[t._v(" OK ")])],1)],1)],1)},H=[],R={name:"DatePicker",props:{dark:{type:Boolean,default:!1}},data(){return{date:(new Date).toISOString().substr(0,7),modal:!1}},computed:{month(){const t=Number(this.date.slice(5));return t}},methods:{handleClickOK(){this.$refs.dialog.save(this.date);const t={year:Number(this.date.slice(0,4)),month:Number(this.date.slice(5))};this.$emit("currentDate",t)}}},L=R,q=(a("f6d4"),Object(k["a"])(L,K,H,!1,null,"28c6a76b",null)),z=q.exports,F=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("Doughnut",{attrs:{"chart-options":t.chartOptions,"chart-data":t.chartData,"chart-id":t.chartId,"dataset-id-key":t.datasetIdKey,plugins:t.plugins,"css-classes":t.cssClasses,styles:t.styles,width:t.width,height:t.height}})},U=[];M["f"].register(M["o"],M["p"],M["h"],M["a"],M["e"]);var V={name:"DoughnutChart",components:{Doughnut:$["b"]},props:{dark:{type:Boolean},chartId:{type:String,default:"doughnut-chart"},datasetIdKey:{type:String,default:"label"},width:{type:Number,default:400},height:{type:Number,default:400},cssClasses:{default:"",type:String},styles:{type:Object,default:()=>{}},plugins:{type:Array,default:()=>[]},chartData:{type:Object,default:()=>({labels:["VueJs","EmberJs","ReactJs","AngularJs"],datasets:[{backgroundColor:["#ffb6b9","#fae3d9","#bbded6","#8ac6d1"],data:[40,20,80,10]}]})}},data(){return{chartOptions:{color:"#00000099",responsive:!0,maintainAspectRatio:!1}}},watch:{dark(){this.dark?this.chartOptions.color="#ffffff":this.chartOptions.color="#00000099"}}},X=V,W=Object(k["a"])(X,F,U,!1,null,null,null),Y=W.exports,G={components:{BarChart:J,DatePicker:z,DoughnutChart:Y},name:"MonthBill",props:{dark:{type:Boolean}},data(){return{monthTotal:null,monthDatasets:[]}},mounted(){const t=new Date,e={year:t.getFullYear(),month:t.getMonth()+1};this.getMonthBill(e)},computed:{chartData(){const t=["#ffb6b9","#fae3d9","#bbded6","#8ac6d1","#fff1ac","#b689b0","#2694ab","#e59572","#fdc4b6","#ea7070"];let e=0;const a=[],r=[],n=[];this.monthDatasets.forEach(s=>{a.push(s.type),r.push(s.amount),n.push(t[e]),e=9==e?0:e+1});const s={labels:a,datasets:[{backgroundColor:n,data:r}]};return s}},methods:{async getMonthBill(t){const e=await v.getMonthBill(t);this.monthDatasets=e.data,this.monthTotal=e.totalAmount},getCurrentDate(t){this.getMonthBill(t)}}},Q=G,Z=(a("dec0"),Object(k["a"])(Q,S,B,!1,null,"1bee6336",null)),tt=Z.exports,et=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"bottom"},[a("v-bottom-navigation",{attrs:{dark:t.dark,grow:"",color:"cyan"},model:{value:t.value,callback:function(e){t.value=e},expression:"value"}},[a("v-btn",{attrs:{value:"recent",depressed:""}},[a("span",[t._v("最近明细")]),a("v-icon",[t._v("mdi-history")])],1),a("v-btn",{attrs:{value:"month"}},[a("span",[t._v("月账单")]),a("v-icon",[t._v("mdi-equalizer-outline")])],1),a("v-btn",{attrs:{value:"other"}},[a("span",[t._v("其他数据")]),a("v-icon",[t._v("mdi-list-box-outline")])],1)],1)],1)},at=[],rt={name:"Bottom",props:{dark:{type:Boolean}},data(){return{value:"recent"}},watch:{value(){this.$emit("currentTab",this.value)}}},nt=rt,st=(a("cfd2"),Object(k["a"])(nt,et,at,!1,null,"970721f2",null)),ot=st.exports,it={name:"Home",components:{AppBar:x,List:T,Bottom:ot,MonthBill:tt},data(){return{dark:!1,navIndex:0,listData:[],totalAmount:0,currentTab:"recent"}},async mounted(){const t=await v.getToday();this.listData=t.details,this.totalAmount=t.totalAmount},methods:{toggleTheme(t){this.dark=t},getNavItem(t){this.navIndex=t,1===t?this.getScopeAmount(7):2===t?this.getScopeAmount(30):0===t&&this.getScopeAmount(1)},async getScopeAmount(t){const e=await v.getScopeAmount({days:t});this.listData=e.details,this.totalAmount=e.totalAmount},getCurrentTab(t){this.currentTab=t}}},lt=it,ct=(a("4fd1"),Object(k["a"])(lt,o,i,!1,null,null,null)),ut=ct.exports,dt={components:{Home:ut}},pt=dt,ht=Object(k["a"])(pt,n,s,!1,null,null,null),mt=ht.exports,vt=a("ce5b"),ft=a.n(vt),bt=(a("bf40"),a("f531"));r["default"].use(ft.a);var gt=new ft.a({lang:{locales:{zhHans:bt["a"]},current:"zhHans"}});r["default"].config.productionTip=!1,new r["default"]({vuetify:gt,render:t=>t(mt)}).$mount("#app")},"76f6":function(t,e,a){},b2a2:function(t,e,a){},b352:function(t,e,a){},b6ea:function(t,e,a){"use strict";a("76f6")},bb62:function(t,e,a){},cf8a:function(t,e,a){},cfd2:function(t,e,a){"use strict";a("0711")},dec0:function(t,e,a){"use strict";a("cf8a")},f6d4:function(t,e,a){"use strict";a("b2a2")}});
//# sourceMappingURL=app.0471694f.js.map